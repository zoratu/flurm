\* TLC Configuration for FlurmConsensus.tla
\* Run with: java -jar tla2tools.jar -config FlurmConsensus.cfg FlurmConsensus.tla

\* Use SafetySpec for faster checking (no fairness constraints)
SPECIFICATION SafetySpec

\* Constants - keep small due to large state space
CONSTANTS
    Servers = {s1, s2, s3}
    MaxTerm = 2
    MaxLogLength = 2
    Values = {v1, v2}

\* Symmetry sets for state space reduction
\* Servers and Values are interchangeable
SYMMETRY ServerSymmetry
CONSTANT ServerSymmetry = Permutations(Servers)

SYMMETRY ValueSymmetry
CONSTANT ValueSymmetry = Permutations(Values)

\* Invariants to verify (safety properties)
INVARIANT TypeInvariant
INVARIANT ElectionSafety
INVARIANT AtMostOneLeaderPerTerm
INVARIANT LogMatching
INVARIANT StateMachineSafety
INVARIANT CommittedEntriesExist

\* Combined safety invariant
INVARIANT Safety

\* For full specification with fairness, change to:
\* SPECIFICATION Spec

\* For liveness checking, uncomment:
\* SPECIFICATION LivenessSpec
\* PROPERTY EventuallyLeader
\* PROPERTY RequestsEventuallyCommitted
