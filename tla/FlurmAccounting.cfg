\* TLC Configuration for FlurmAccounting
\* Run with: java -jar tla2tools.jar -config FlurmAccounting.cfg FlurmAccounting.tla

\* Model values (reduced for feasible checking)
CONSTANTS
    Nodes = {n1, n2, n3}
    MaxJobs = 2
    MaxTRES = 3
    Users = {alice, bob}
    Nil = Nil

\* Symmetry sets for state space reduction
\* Nodes and Users are interchangeable
SYMMETRY NodeSymmetry
CONSTANT NodeSymmetry = Permutations(Nodes)

SYMMETRY UserSymmetry
CONSTANT UserSymmetry = Permutations(Users)

\* Invariants to check (safety properties)
INVARIANT TypeInvariant
INVARIANT TRESConsistency
INVARIANT NoDoubleCounting
INVARIANT TRESNonNegative
INVARIANT UserTotalsNonNegative
INVARIANT LogPrefixConsistency

\* Combined safety invariant
INVARIANT Safety

\* Properties (liveness requires fairness, check separately)
\* Uncomment for liveness checking with LivenessSpec:
\* PROPERTY TRESEventualConsistency
\* PROPERTY AllJobsRecorded
\* PROPERTY CommittedEntriesApplied

\* Specification (SafetySpec for invariant checking only)
\* Use Spec or LivenessSpec for fairness/liveness checking
SPECIFICATION SafetySpec
